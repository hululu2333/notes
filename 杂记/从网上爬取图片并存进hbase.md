### 从网上爬取图片并存进hbase

> 这个项目我将其分为三个模块，分别是爬虫模块、图片与字符串互转模块、hbase模块
>
> github地址：



#### 爬虫模块

> 爬虫模块分为三个类，UrlGetter、Spider和ImgDownloader

> UrlGetter：这是个静态类，里面有两个静态方法，分别用来获取网页链接和图片链接。我采用的是正则表达式的方式来获取
>
> ImgDownloader：这个类里有个downloader方法，调用的时候输入图片链接集合和一个路径。downloader方法就会将集合中的图片下载到你输入的路径下
>
> Spider：是这个模块的入口，调用其余两个模块，完成爬取功能

``` txt
心得体会: 我们需要用java代码来下载一个网页，起初我是打算用URL类来完成，但后来找到了现成的用HttpClients类实现的代码。为了省去麻烦，于是我采用了这个方式。
	使用这种方式需要一系列的类，需要导入相应的jar包
	在下载图片的时候，我是通过URL类创建输入流，经过程序内存中转，最终输出到磁盘上。但总是出现图片显示的问题，我猜测是在用缓冲字节数组将输入流中的数据放入输出流时出的问题，最后一次将输入流的数据放进缓冲字节数组时肯定是放不满的，这时我们将缓冲字节数组中的数据放进输出流时，会多放一些东西，导致图片内容有一些改变，并最终导致图片显示错误。
	最后一次放数据时，我没有将缓冲字节数组中的数据全放进输出流，而是采用这种方式：fos.write(temp,0,length); length是本次输入流交给缓冲字节数组的字节个数，这样修改后，就没有问题了

```



#### 图片字符串互转模块

> 要将图片本身存进数据库，最容易理解的方式就是将图片转换成字符串了。我通过base64的编码器将图片转换成字符串，然后存进数据库中。取得时候也可以通过解码器将字符串重新换成图片

``` txt
心得体会: 因为在插数据进hbase时，我们还是得将其他类型转换成字节数组。图片读进程序中本来就是以字节数组的形式储存，那我是不是可以不转换，直接将图片放进hbase?
```



#### hbase模块

> 这个模块主要分为Record，HClient和Entrance类

> Record：javabeen，一个Record对象代表hbase逻辑中的一行数据
>
> HClient：可以看作hbase客户端的抽象，里面定义了一个addData方法，可以向hbase中插入数据。
>
> Entrance：程序的入口

``` txt
	一开始运行的时候，连接hbase的那行代码一直报错，在网上也找不到答案。经过大佬初步分析，应该是jar包导入的错误。
	后来发现我pom中写的依赖版本和我采用代码的那个人的版本不同，后来我想换成他的版本试一次，但是显示找不到对应的依赖
	最终我采用了官方文档中的连接hbase的方式，这个bug解决
```



create 'test:map_depot','animal'

