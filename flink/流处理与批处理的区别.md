### 流处理与批处理的区别

> 现存的分布式计算引擎有很多，按流处理与批处理可以分为两类
>
> 批处理：MapReduce，Tez
>
> 流处理：Storm，Smaza
>
> 流处理系统与批处理系统最大的不同在于节点间的数据传输方式



#### 批处理

> 对于一个批处理系统来说，其节点间数据传输的标准模型是：当一条数据被处理完成后，序列化到缓存中，并不会立刻通过网络传输到下一个节点，当缓存写满，就持久化到本地硬盘上，当所有数据都被处理完成后，才开始将处理后的数据通过网络传输到下一个节点。



#### 流处理

> 对于一个流处理系统，其节点间数据传输的标准模型是：当一条数据被处理完成后，序列化到缓存中，然后立刻通过网络传输到下一个节点，由下一个节点继续处理。



#### Flink是流处理还是批处理？

> 批处理和流处理这两种传输模式是两个极端，对应的是流处理系统对低延迟的要求和批处理系统对高吞吐量的要求
>
> Flink采用了一种折中的方法，Flink以固定的缓存块为单位进行网络数据传输，用户可以通过缓存块超时值指定缓存块的传输时机。
>
> 如果缓存块的超时值为0，则Flink的数据传输方式类似上文所提到流处理系统的标准模型，此时系统可以获得最低的处理延迟。如果缓存块的超时值为无限大，则Flink的数据传输方式类似上文所提到批处理系统的标准模型，此时系统可以获得最高的吞吐量。
>
> 同时缓存块的超时值也可以设置为0到无限大之间的任意值。缓存块的超时阈值越小，则Flink流处理执行引擎的数据处理延迟越低，但吞吐量也会降低，反之亦然。通过调整缓存块的超时阈值，用户可根据需求灵活地权衡系统延迟和吞吐量。



#### 同时支持流处理和批处理的框架

> Spark和Flink这两个框架都能同时实现批处理和流处理

##### Spark

> Spark用的是批处理系统，SparkStreaming可以用来流式计算。但park Streaming采用了一种micro-batch的架构，即把输入的数据流切分成细粒度的batch，并为每一个batch数据提交一个批处理的Spark任务，所以Spark  Streaming本质上还是基于Spark批处理系统对流式数据进行处理

##### Flink

> Flink采用了一种折中的方式来实现批处理和流处理功能，这种方式更接近与流处理系统。所以在处理流式数据时，Flink比Spark有着更低的延迟





