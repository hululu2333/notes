### hive的架构

***

![image-20201116102617483](F:\学习笔记\hive\images\hive架构.png)

> meta store指的是元数据，元数据里包括了表名、表所属的数据库、表的拥有者、列/分区字段、表的类型（是否为外部表）、表的数据所在目录等。一般我们将meta store储存在mysql中。（如果储存在deby中的话，一个hadoop集群只能启动一个hive）



#### hive架构

> 在上图中，只有解析器、编译器、优化器和执行器是属于hive的模块

> **解析器：**将SQL字符串转化成抽象语法树AST，这一步一般都用第三方工具库完成，比如antlr；对AST进行语法分析，比如表是否存在、字段是否存在、SQL语义是否有误
>
> **编译器：**将AST编译生成逻辑执行计划
>
> **优化器：**对逻辑执行计划进行优化
>
> **执行器：**把逻辑执行计划转换成QA!~可以运行的物理计划。对于hive来说，就是MR/spark



##### hive的运行机制

> 先去mysql中拿到元数据，然后根据元数据拼接起来的路径，去hdfs访问实际的数据

![image-20201116113612509](F:\学习笔记\hive\images\hive的运行机制.png)