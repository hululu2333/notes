### hive简介

***

#### 什么是hive

> hive是基于hadoop的一个数据仓库工具，可以将结构化的数据文件映射为一张表，并提供类SQL查询功能。
>
> hive的本质是将HQL转化为MapReduce程序，如果需要的话也可以转换成spark（Hbase Query Languare）
>
> HQL转化为MapReduce程序的流程如下图所示

<img src="F:\学习笔记\hive\images\hive转mapreduce.png" alt="image-20201115171231345" style="zoom:50%;" />

> hive其实可以看作是hadoop的一个客户端，因为hive工作要调用hdfs，yarn和mapreduce。而且虽然hive的底层是实现分布式计算，但hive并不是一个分布式框架



#### hive的优缺点

##### 优点

> **容易上手：**操作接口采用类sql语法，会使用sql的人很容易上手hive
>
> **操作简单：**因为hive框架可以将hql转换为mapreduce，所以我们不需要编写mapreduce
>
> **自定义函数：**支持用户自定义函数，用户可以根据自己的需求来创建函数

***

##### 缺点

> **执行延迟高：**因为底层默认由mapreduce实现，所以执行延迟比较高，不太适合实时数据处理。比较适合离线的数据分析，因为mapreduce的吞吐量大
>
> **HQL表达能力有限：**因为hql语法比较简单固定，所以用hql表达不出迭代式的算法，在数据挖掘方面也不太擅长
>
> **Hive的效率较低：**因为是根据我们写的hql语句自动转换的mapreduce程序，所以mapreduce程序中很可能有一些不必要且降低效率的代码。对hive的调优也比较困难，因为粒度比较粗



#### hive和数据库的区别

> 除了HQL和SQL有点相似外，hive和数据库再无其他相同点

> **数据储存位置：**hive的数据储存在hdfs中，而数据库直接存在块设备或本地磁盘中
>
> **数据更新：**hive是针对数据仓库应用设计的，而数据仓库的内容是读多写少，所以hive中不建议对数据进行改写操作。数据库的读和写则同样频繁
>
> **索引：**hive不会建立索引，因此访问延迟较高。因为hive底层采用的是mapreduce，可以并行计算，所以在对海量数据进行访问时，也有一定优势。数据库通常会根据一个或几个列建立索引，因此在对少量数据进行访问时，会有很低的延迟
>
> **执行：**hive中大多数查询的执行是通过mapreduce来实现的，而数据库通常都有自己的执行引擎

